{"version":3,"file":"user.controller.js","sourceRoot":"","sources":["../../../src/controller/user/user.controller.ts"],"names":[],"mappings":";;;AAGA,+CAA0D;AAC1D,6CAAoD;AACpD,2CAA4C;AAE5C,MAAM,cAAc;IAApB;QAqBI,eAAU,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;YAC7D,OAAO,6BAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAChD,CAAC,CAAA;IAwCL,CAAC;IA9DU,KAAK,CAAC,WAAW,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;QACpE,IAAI;YACA,MAAM,KAAK,GAAG,MAAM,qBAAW,CAAC,YAAY,EAAE,CAAC;YAC/C,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACnB;QAAC,OAAO,CAAC,EAAE;YACR,IAAI,CAAC,CAAC,CAAC,CAAC;SACX;IACL,CAAC;IAEM,KAAK,CAAC,aAAa,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;QACtE,IAAI;YACA,MAAM,EAAC,MAAM,EAAC,GAAG,GAAG,CAAC,MAAM,CAAC;YAC5B,MAAM,QAAQ,GAAG,MAAM,qBAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YAEpD,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACtB;QAAC,OAAO,CAAC,EAAE;YACR,IAAI,CAAC,CAAC,CAAC,CAAC;SACX;IACL,CAAC;IAMO,KAAK,CAAC,WAAW,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,WAAwB;QAC/F,IAAI;YACA,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;YAEtB,MAAM,qBAAW,CAAC,UAAU,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;YAChD,MAAM,WAAW,CAAC,MAAM,EAAE,CAAC;YAC3B,GAAG,CAAC,MAAM,CAAC,mCAAuB,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC;SACrD;QAAC,OAAO,CAAC,EAAE;YACR,MAAM,WAAW,CAAC,QAAQ,EAAE,CAAC;YAC7B,IAAI,CAAC,CAAC,CAAC,CAAC;SACX;IACL,CAAC;IAEM,KAAK,CAAC,UAAU,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,WAAwB;QAC7F,IAAI;YACA,MAAM,EAAC,MAAM,EAAC,GAAG,GAAG,CAAC,MAAM,CAAC;YAE5B,MAAM,qBAAW,CAAC,UAAU,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;YAClD,MAAM,WAAW,CAAC,MAAM,EAAE,CAAC;YAC3B,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACvB;QAAC,OAAO,CAAC,EAAE;YACR,MAAM,WAAW,CAAC,QAAQ,EAAE,CAAC;YAC7B,IAAI,CAAC,CAAC,CAAC,CAAC;SACX;IACL,CAAC;IAEM,KAAK,CAAC,UAAU,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;QACnE,IAAI;YACA,MAAM,EAAC,MAAM,EAAC,GAAG,GAAG,CAAC,MAAM,CAAC;YAE5B,MAAM,qBAAW,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;YAErC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACvB;QAAC,OAAO,CAAC,EAAE;YACR,IAAI,CAAC,CAAC,CAAC,CAAC;SACX;IACL,CAAC;CAEJ;AAEY,QAAA,cAAc,GAAG,IAAI,cAAc,EAAE,CAAC","sourcesContent":["import { NextFunction, Request, Response } from 'express';\n\nimport { Transaction } from 'sequelize';\nimport { ResponseStatusCodesEnum } from '../../constants';\nimport { transactionWrapper } from '../../database';\nimport { userService } from '../../service';\n\nclass UserController {\n    public async getAllUsers(req: Request, res: Response, next: NextFunction) {\n        try {\n            const users = await userService.findAllUsers();\n            res.json(users);\n        } catch (e) {\n            next(e);\n        }\n    }\n\n    public async getSingleUser(req: Request, res: Response, next: NextFunction) {\n        try {\n            const {userId} = req.params;\n            const userById = await userService.findUser(userId);\n\n            res.json(userById);\n        } catch (e) {\n            next(e);\n        }\n    }\n\n    createUser = (req: Request, res: Response, next: NextFunction) => {\n        return transactionWrapper(this._createUser);\n    }\n\n    private async _createUser(req: Request, res: Response, next: NextFunction, transaction: Transaction) {\n        try {\n            const user = req.body;\n\n            await userService.createUser(user, transaction);\n            await transaction.commit();\n            res.status(ResponseStatusCodesEnum.CREATED).end();\n        } catch (e) {\n            await transaction.rollback();\n            next(e);\n        }\n    }\n\n    public async updateUser(req: Request, res: Response, next: NextFunction, transaction: Transaction) {\n        try {\n            const {userId} = req.params;\n\n            await userService.updateUser(userId, transaction);\n            await transaction.commit();\n            res.json('updated');\n        } catch (e) {\n            await transaction.rollback();\n            next(e);\n        }\n    }\n\n    public async deleteUser(req: Request, res: Response, next: NextFunction) {\n        try {\n            const {userId} = req.params;\n\n            await userService.deleteUser(userId);\n\n            res.json('deleted');\n        } catch (e) {\n            next(e);\n        }\n    }\n\n}\n\nexport const userController = new UserController();\n"]}